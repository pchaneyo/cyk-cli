<?xml-model href="https://www.cyklang.net/schema/cyklang.xsd" type="application/xml" schematypens="http://www.w3.org/2001/XMLSchema"?>
<module>

    <!-- function hello_world -->

    <function name="hello_world" returns="result: object">
        <block>
            <string name="data" literal=""><![CDATA[
            <root>
                <message>
                    <title>Bonjour Le Monde4</title>
                    Suite
                </message>
            </root>
                ]]>
            </string>
            <db.report returns="result" format="pdf">
                <string name="style">
                    hex2string(dlookup('asset_content','cyk_asset', "asset_route='/test/hello_world.xml'"))
                </string>
                <string name="data">data
                </string>
            </db.report>
        </block>
    </function>

    <!-- function tableau -->

    <function name="tableau" returns="result: object">
        <block>
            <query name="query">
                <string name="sql" literal="">
                select * from t_actor
                </string>
            </query>

            <object name="query_result"/>

            <runquery name="query" result="query_result"/>

            <print>xmlformat(query_result)</print>

            <string name="data">xmlformat(query_result)
            </string>

            <db.report returns="result" format="pdf">
                <string name="style">
            hex2string(dlookup('asset_content','cyk_asset', "asset_route='/test/tableau.xml'"))
                </string>
                <string name="data">data
                </string>
            </db.report>
        </block>
    </function>

    <!-- function balance -->

    <function name="balance" returns="result: object">
        <block>
            <query name="query">
                <string name="sql" literal="">
                    select * from t_actor
                </string>
            </query>

            <object name="query_result"/>

            <runquery name="query" result="query_result"/>

            <print>xmlformat(query_result)</print>

            <string name="data">xmlformat(query_result)
            </string>

            <db.report returns="result" format="pdf">
                <string name="style">
                hex2string(dlookup('asset_content','cyk_asset', "asset_route='/test/balance.xml'"))
                </string>
                <string name="data">data
                </string>
            </db.report>
        </block>
    </function>

</module>